{"version":3,"names":["React","Modal","StyleSheet","View","Text","Animated","TouchableWithoutFeedback","KeyboardAvoidingView","Button","IconButton","overlay","useTheme","TimePicker","clockTypes","getTimeInputTypeIcon","inputTypes","reverseInputTypes","supportedOrientations","TimePickerModal","visible","onDismiss","onConfirm","hours","minutes","label","uppercase","cancelLabel","confirmLabel","animationType","locale","keyboardIcon","clockIcon","theme","textFont","isV3","fonts","bodyMedium","medium","inputType","setInputType","useState","picker","focused","setFocused","localHours","setLocalHours","getHours","localMinutes","setLocalMinutes","getMinutes","useEffect","onFocusInput","useCallback","type","onChange","params","absoluteFill","styles","modalBackground","backgroundColor","colors","backdrop","modalRoot","keyboardView","modalContent","dark","surface","borderRadius","roundness","labelContainer","color","onBackground","text","toUpperCase","timePickerContainer","bottom","keyboard","inputTypeToggle","fill","undefined","Date","create","justifyContent","alignItems","flex","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","elevation","minWidth","paddingLeft","paddingRight","marginTop","letterSpacing","fontSize","padding","flexDirection","margin","memo"],"sources":["TimePickerModal.tsx"],"sourcesContent":["import * as React from 'react'\nimport {\n  Modal,\n  StyleSheet,\n  View,\n  Text,\n  Animated,\n  TouchableWithoutFeedback,\n  KeyboardAvoidingView,\n} from 'react-native'\n\nimport {\n  Button,\n  IconButton,\n  MD2Theme,\n  overlay,\n  useTheme,\n} from 'react-native-paper'\n\nimport TimePicker from './TimePicker'\nimport {\n  clockTypes,\n  getTimeInputTypeIcon,\n  inputTypes,\n  PossibleClockTypes,\n  PossibleInputTypes,\n  reverseInputTypes,\n} from './timeUtils'\n\nconst supportedOrientations: any[] = [\n  'portrait',\n  'portrait-upside-down',\n  'landscape',\n  'landscape-left',\n  'landscape-right',\n]\n\nexport function TimePickerModal({\n  visible,\n  onDismiss,\n  onConfirm,\n  hours,\n  minutes,\n  label = 'Select time',\n  uppercase = true,\n  cancelLabel = 'Cancel',\n  confirmLabel = 'Ok',\n  animationType = 'none',\n  locale,\n  keyboardIcon = 'keyboard-outline',\n  clockIcon = 'clock-outline',\n}: {\n  locale?: undefined | string\n  label?: string\n  uppercase?: boolean\n  cancelLabel?: string\n  confirmLabel?: string\n  hours?: number | undefined\n  minutes?: number | undefined\n  visible: boolean | undefined\n  onDismiss: () => any\n  onConfirm: (hoursAndMinutes: { hours: number; minutes: number }) => any\n  animationType?: 'slide' | 'fade' | 'none'\n  keyboardIcon?: string\n  clockIcon?: string\n}) {\n  const theme = useTheme()\n\n  let textFont\n\n  if (theme.isV3) {\n    textFont = theme.fonts.bodyMedium\n  } else {\n    textFont = (theme as any as MD2Theme)?.fonts.medium\n  }\n\n  const [inputType, setInputType] = React.useState<PossibleInputTypes>(\n    inputTypes.picker\n  )\n  const [focused, setFocused] = React.useState<PossibleClockTypes>(\n    clockTypes.hours\n  )\n  const [localHours, setLocalHours] = React.useState<number>(getHours(hours))\n  const [localMinutes, setLocalMinutes] = React.useState<number>(\n    getMinutes(minutes)\n  )\n\n  React.useEffect(() => {\n    setLocalHours(getHours(hours))\n  }, [setLocalHours, hours])\n\n  React.useEffect(() => {\n    setLocalMinutes(getMinutes(minutes))\n  }, [setLocalMinutes, minutes])\n\n  const onFocusInput = React.useCallback(\n    (type: PossibleClockTypes) => setFocused(type),\n    []\n  )\n  const onChange = React.useCallback(\n    (params: {\n      focused?: PossibleClockTypes | undefined\n      hours: number\n      minutes: number\n    }) => {\n      if (params.focused) {\n        setFocused(params.focused)\n      }\n\n      setLocalHours(params.hours)\n      setLocalMinutes(params.minutes)\n    },\n    [setFocused, setLocalHours, setLocalMinutes]\n  )\n  return (\n    <Modal\n      animationType={animationType}\n      transparent={true}\n      visible={visible}\n      onRequestClose={onDismiss}\n      presentationStyle=\"overFullScreen\"\n      supportedOrientations={supportedOrientations}\n      //@ts-ignore\n      statusBarTranslucent={true}\n    >\n      <>\n        <TouchableWithoutFeedback onPress={onDismiss}>\n          <View\n            style={[\n              StyleSheet.absoluteFill,\n              styles.modalBackground,\n              { backgroundColor: theme.colors?.backdrop },\n            ]}\n          />\n        </TouchableWithoutFeedback>\n\n        <View\n          style={[StyleSheet.absoluteFill, styles.modalRoot]}\n          pointerEvents=\"box-none\"\n        >\n          <KeyboardAvoidingView\n            style={styles.keyboardView}\n            behavior={'padding'}\n          >\n            <Animated.View\n              style={[\n                styles.modalContent,\n                {\n                  backgroundColor: theme.dark\n                    ? overlay(10, theme.colors.surface)\n                    : theme.colors.surface,\n                  borderRadius: theme.roundness,\n                },\n              ]}\n            >\n              <View style={styles.labelContainer}>\n                <Text\n                  style={[\n                    styles.label,\n                    {\n                      ...textFont,\n                      color: theme?.isV3\n                        ? theme.colors.onBackground\n                        : (theme as any as MD2Theme).colors.text,\n                    },\n                  ]}\n                >\n                  {uppercase ? label.toUpperCase() : label}\n                </Text>\n              </View>\n              <View style={styles.timePickerContainer}>\n                <TimePicker\n                  locale={locale}\n                  inputType={inputType}\n                  focused={focused}\n                  hours={localHours}\n                  minutes={localMinutes}\n                  onChange={onChange}\n                  onFocusInput={onFocusInput}\n                />\n              </View>\n              <View style={styles.bottom}>\n                <IconButton\n                  icon={getTimeInputTypeIcon(inputType, {\n                    keyboard: keyboardIcon,\n                    picker: clockIcon,\n                  })}\n                  onPress={() => setInputType(reverseInputTypes[inputType])}\n                  size={24}\n                  style={styles.inputTypeToggle}\n                  accessibilityLabel=\"toggle keyboard\"\n                />\n                <View style={styles.fill} />\n                <Button onPress={onDismiss} uppercase={uppercase}>\n                  {cancelLabel}\n                </Button>\n                <Button\n                  onPress={() =>\n                    onConfirm({ hours: localHours, minutes: localMinutes })\n                  }\n                  uppercase={uppercase}\n                >\n                  {confirmLabel}\n                </Button>\n              </View>\n            </Animated.View>\n          </KeyboardAvoidingView>\n        </View>\n      </>\n    </Modal>\n  )\n}\n\nfunction getMinutes(minutes: number | undefined | null): number {\n  return minutes === undefined || minutes === null\n    ? new Date().getMinutes()\n    : minutes\n}\nfunction getHours(hours: number | undefined | null): number {\n  return hours === undefined || hours === null ? new Date().getHours() : hours\n}\n\nconst styles = StyleSheet.create({\n  modalRoot: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    flex: 1,\n  },\n  keyboardView: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    flex: 1,\n  },\n  modalBackground: {\n    flex: 1,\n  },\n  modalContent: {\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 5,\n    },\n    shadowOpacity: 0.34,\n    shadowRadius: 6.27,\n    elevation: 10,\n    minWidth: 287,\n  },\n  labelContainer: {\n    height: 28,\n    justifyContent: 'flex-end',\n    paddingLeft: 24,\n    paddingRight: 24,\n    marginTop: 8,\n  },\n  label: {\n    letterSpacing: 1,\n    fontSize: 13,\n  },\n  timePickerContainer: { padding: 24 },\n  bottom: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 8,\n  },\n  inputTypeToggle: { margin: 4 },\n  fill: { flex: 1 },\n})\n\nexport default React.memo(TimePickerModal)\n"],"mappings":"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"}